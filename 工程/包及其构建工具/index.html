<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>go包管理工具 | GOFamily - go 后端程序员宝典</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="/GOFamily/favicon.ico">
    <meta name="description" content="🔥 go 后端程序员宝典，包含了：算法，数据库，网络操作系统，分布式，系统设计等一揽子知识体系">
    
    <link rel="preload" href="/GOFamily/assets/css/0.styles.accc8640.css" as="style"><link rel="preload" href="/GOFamily/assets/js/app.a103b542.js" as="script"><link rel="preload" href="/GOFamily/assets/js/2.ed67c6f0.js" as="script"><link rel="preload" href="/GOFamily/assets/js/53.8221a3a8.js" as="script"><link rel="prefetch" href="/GOFamily/assets/js/10.733360c3.js"><link rel="prefetch" href="/GOFamily/assets/js/11.82a11e90.js"><link rel="prefetch" href="/GOFamily/assets/js/12.db289772.js"><link rel="prefetch" href="/GOFamily/assets/js/13.71e10a95.js"><link rel="prefetch" href="/GOFamily/assets/js/14.0e813a56.js"><link rel="prefetch" href="/GOFamily/assets/js/15.8187edee.js"><link rel="prefetch" href="/GOFamily/assets/js/16.0c82cc4c.js"><link rel="prefetch" href="/GOFamily/assets/js/17.bcc1b696.js"><link rel="prefetch" href="/GOFamily/assets/js/18.bb028d9e.js"><link rel="prefetch" href="/GOFamily/assets/js/19.243cc602.js"><link rel="prefetch" href="/GOFamily/assets/js/20.ba7f1c47.js"><link rel="prefetch" href="/GOFamily/assets/js/21.7b941cc5.js"><link rel="prefetch" href="/GOFamily/assets/js/22.53470164.js"><link rel="prefetch" href="/GOFamily/assets/js/23.bcb1fdb9.js"><link rel="prefetch" href="/GOFamily/assets/js/24.cf874078.js"><link rel="prefetch" href="/GOFamily/assets/js/25.f51ec545.js"><link rel="prefetch" href="/GOFamily/assets/js/26.5bf01055.js"><link rel="prefetch" href="/GOFamily/assets/js/27.19efeb8c.js"><link rel="prefetch" href="/GOFamily/assets/js/28.aa307a63.js"><link rel="prefetch" href="/GOFamily/assets/js/29.63f2e535.js"><link rel="prefetch" href="/GOFamily/assets/js/3.66193a6c.js"><link rel="prefetch" href="/GOFamily/assets/js/30.0fe35f9f.js"><link rel="prefetch" href="/GOFamily/assets/js/31.655cb41c.js"><link rel="prefetch" href="/GOFamily/assets/js/32.1043fe58.js"><link rel="prefetch" href="/GOFamily/assets/js/33.8f3dc184.js"><link rel="prefetch" href="/GOFamily/assets/js/34.4ef0126c.js"><link rel="prefetch" href="/GOFamily/assets/js/35.8b279a49.js"><link rel="prefetch" href="/GOFamily/assets/js/36.14571c52.js"><link rel="prefetch" href="/GOFamily/assets/js/37.1462b7f9.js"><link rel="prefetch" href="/GOFamily/assets/js/38.3be82514.js"><link rel="prefetch" href="/GOFamily/assets/js/39.9324f88a.js"><link rel="prefetch" href="/GOFamily/assets/js/4.1ec5e302.js"><link rel="prefetch" href="/GOFamily/assets/js/40.177e0c87.js"><link rel="prefetch" href="/GOFamily/assets/js/41.2f4b9348.js"><link rel="prefetch" href="/GOFamily/assets/js/42.e7f846a2.js"><link rel="prefetch" href="/GOFamily/assets/js/43.ca618db2.js"><link rel="prefetch" href="/GOFamily/assets/js/44.270530dc.js"><link rel="prefetch" href="/GOFamily/assets/js/45.d5b29b3f.js"><link rel="prefetch" href="/GOFamily/assets/js/46.475ad7f5.js"><link rel="prefetch" href="/GOFamily/assets/js/47.29f45526.js"><link rel="prefetch" href="/GOFamily/assets/js/48.89a95db2.js"><link rel="prefetch" href="/GOFamily/assets/js/49.99bf2079.js"><link rel="prefetch" href="/GOFamily/assets/js/5.b3141e55.js"><link rel="prefetch" href="/GOFamily/assets/js/50.13aa7ef6.js"><link rel="prefetch" href="/GOFamily/assets/js/51.c30c1c33.js"><link rel="prefetch" href="/GOFamily/assets/js/52.b804bdad.js"><link rel="prefetch" href="/GOFamily/assets/js/54.4d7d4483.js"><link rel="prefetch" href="/GOFamily/assets/js/55.fa5a6d59.js"><link rel="prefetch" href="/GOFamily/assets/js/56.f15db2e8.js"><link rel="prefetch" href="/GOFamily/assets/js/57.4d6ea1e1.js"><link rel="prefetch" href="/GOFamily/assets/js/58.04d964f4.js"><link rel="prefetch" href="/GOFamily/assets/js/59.eaf23c65.js"><link rel="prefetch" href="/GOFamily/assets/js/6.0f12c022.js"><link rel="prefetch" href="/GOFamily/assets/js/60.20afaad5.js"><link rel="prefetch" href="/GOFamily/assets/js/61.3131af66.js"><link rel="prefetch" href="/GOFamily/assets/js/62.8ba514e8.js"><link rel="prefetch" href="/GOFamily/assets/js/63.32ee10c3.js"><link rel="prefetch" href="/GOFamily/assets/js/64.46c9066e.js"><link rel="prefetch" href="/GOFamily/assets/js/65.578bd757.js"><link rel="prefetch" href="/GOFamily/assets/js/66.f8a4b483.js"><link rel="prefetch" href="/GOFamily/assets/js/67.bbeb0c9a.js"><link rel="prefetch" href="/GOFamily/assets/js/68.0b5844d7.js"><link rel="prefetch" href="/GOFamily/assets/js/69.633fc06b.js"><link rel="prefetch" href="/GOFamily/assets/js/7.0db9bcbe.js"><link rel="prefetch" href="/GOFamily/assets/js/70.a7df67cd.js"><link rel="prefetch" href="/GOFamily/assets/js/71.1080c71c.js"><link rel="prefetch" href="/GOFamily/assets/js/72.45a35ec4.js"><link rel="prefetch" href="/GOFamily/assets/js/73.e3a79c14.js"><link rel="prefetch" href="/GOFamily/assets/js/74.2084b84b.js"><link rel="prefetch" href="/GOFamily/assets/js/75.5e035ea4.js"><link rel="prefetch" href="/GOFamily/assets/js/8.d616309e.js"><link rel="prefetch" href="/GOFamily/assets/js/9.3fe8ee45.js">
    <link rel="stylesheet" href="/GOFamily/assets/css/0.styles.accc8640.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/GOFamily/" class="home-link router-link-active"><img src="https://avatars.githubusercontent.com/u/42873232" alt="GOFamily - go 后端程序员宝典" class="logo"> <span class="site-name can-hide">GOFamily - go 后端程序员宝典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/GOFamily/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="project" class="dropdown-title"><span class="title">推荐项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="project" class="mobile-dropdown-title"><span class="title">推荐项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/hui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hui 【web框架】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/key" target="_blank" rel="noopener noreferrer" class="nav-link external">
  key  【服务授权系统】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/ka" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ka  【秒杀服务】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/go-key" target="_blank" rel="noopener noreferrer" class="nav-link external">
  go-short 【短链接服务】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">系列教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">系列教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily 【go语言教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  【基础408知识教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  【系统设计教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  【工具教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  【给程序员写的书】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/GOFamily" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/GOFamily/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="project" class="dropdown-title"><span class="title">推荐项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="project" class="mobile-dropdown-title"><span class="title">推荐项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/hui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hui 【web框架】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/key" target="_blank" rel="noopener noreferrer" class="nav-link external">
  key  【服务授权系统】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/ka" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ka  【秒杀服务】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/shgopher/go-key" target="_blank" rel="noopener noreferrer" class="nav-link external">
  go-short 【短链接服务】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><span class="title">系列教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Menu" class="mobile-dropdown-title"><span class="title">系列教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/GOFamily/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GOFamily 【go语言教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/408/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  408  【基础408知识教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/luban/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  luban  【系统设计教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/dingdang/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  dingdang  【工具教程】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://shgopher.github.io/god/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  god  【给程序员写的书】
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://shgopher.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/shgopher/GOFamily" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E/" class="sidebar-link">变量声明</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E5%B8%B8%E9%87%8F%E5%A3%B0%E6%98%8E/" class="sidebar-link">常量声明</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%9B%B6%E5%80%BC/" class="sidebar-link">零值</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E5%A4%8D%E5%90%88%E5%AD%97%E9%9D%A2%E9%87%8F/" class="sidebar-link">复合字面量</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B/" class="sidebar-link">数字类型</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/slice/" class="sidebar-link">slice</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/string/" class="sidebar-link">string</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/map/" class="sidebar-link">map</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E6%B1%82%E5%80%BC%E9%A1%BA%E5%BA%8F/" class="sidebar-link">求值顺序</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E4%BD%9C%E7%94%A8%E5%9F%9F/" class="sidebar-link">作用域</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95/" class="sidebar-link">函数方法</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/interface/" class="sidebar-link">interface</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E9%80%BB%E8%BE%91%E5%92%8C%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5/" class="sidebar-link">逻辑和判断语句</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E5%85%B3%E9%94%AE%E5%AD%97/" class="sidebar-link">关键字</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E6%B3%9B%E5%9E%8B/" class="sidebar-link">泛型</a></li><li><a href="/GOFamily/%E5%9F%BA%E7%A1%80/%E5%85%B6%E4%BB%96%E5%86%85%E5%AE%B9/" class="sidebar-link">其他内容</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>并发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GOFamily/%E5%B9%B6%E5%8F%91/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" class="sidebar-link">内存模型</a></li><li><a href="/GOFamily/%E5%B9%B6%E5%8F%91/%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/" class="sidebar-link">并发模型</a></li><li><a href="/GOFamily/%E5%B9%B6%E5%8F%91/%E5%B9%B6%E5%8F%91%E5%8E%9F%E8%AF%AD/" class="sidebar-link">并发原语</a></li><li><a href="/GOFamily/%E5%B9%B6%E5%8F%91/channel/" class="sidebar-link">channel</a></li><li><a href="/GOFamily/%E5%B9%B6%E5%8F%91/atomic/" class="sidebar-link">atomic</a></li><li><a href="/GOFamily/%E5%B9%B6%E5%8F%91/context/" class="sidebar-link">context</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>runtime</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GOFamily/runtime/%E4%B8%89%E8%89%B2gc%E7%AE%97%E6%B3%95/" class="sidebar-link">三色gc算法</a></li><li><a href="/GOFamily/runtime/%E5%A0%86%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" class="sidebar-link">堆内存分配</a></li><li><a href="/GOFamily/runtime/%E6%A0%88%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" class="sidebar-link">栈内存管理</a></li><li><a href="/GOFamily/runtime/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/" class="sidebar-link">系统监控</a></li><li><a href="/GOFamily/runtime/gmp/" class="sidebar-link">G:M:P</a></li><li><a href="/GOFamily/runtime/%E5%AE%9A%E6%97%B6%E5%99%A8/" class="sidebar-link">定时器</a></li><li><a href="/GOFamily/runtime/netpool/" class="sidebar-link">netpool</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8C%85%E5%8F%8A%E5%85%B6%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" aria-current="page" class="active sidebar-link">包及其构建工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8C%85%E5%8F%8A%E5%85%B6%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/#go语言的包导入过程" class="sidebar-link">go语言的包导入过程</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8C%85%E5%8F%8A%E5%85%B6%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/#导包的顺序" class="sidebar-link">导包的顺序</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8C%85%E5%8F%8A%E5%85%B6%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/#go-module-构建工具" class="sidebar-link">go module 构建工具</a></li><li class="sidebar-sub-header"><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8C%85%E5%8F%8A%E5%85%B6%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E6%B5%8B%E8%AF%95/" class="sidebar-link">测试</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95/" class="sidebar-link">动态调试</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" class="sidebar-link">错误处理</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/cgo/" class="sidebar-link">cgo</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5/" class="sidebar-link">代码检查</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%8F%8D%E5%B0%84/" class="sidebar-link">反射</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/web/" class="sidebar-link">web</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/wasm/" class="sidebar-link">wasm</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/ioc/" class="sidebar-link">ioc</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E5%91%BD%E4%BB%A4/" class="sidebar-link">命令</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E4%BC%98%E7%A7%80%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/" class="sidebar-link">优秀第三方包</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/go%E6%A0%87%E5%87%86%E5%BA%93/" class="sidebar-link">go标准库</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/%E9%A1%B9%E7%9B%AE%E7%BB%84%E7%BB%87%E5%BD%A2%E5%BC%8F/" class="sidebar-link">项目组织形式</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/go%E5%91%BD%E5%90%8D%E6%83%AF%E4%BE%8B/" class="sidebar-link">go命名惯例</a></li><li><a href="/GOFamily/%E5%B7%A5%E7%A8%8B/go%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83/" class="sidebar-link">go语言规范</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="go包管理工具">go包管理工具</h1> <ul><li>go导包的过程</li> <li>go 包的版本管理</li> <li>go 包的最小版本原则</li> <li>go module 命令的使用
<ul><li>go get / go install</li> <li>GOPROXY</li> <li>GOSUMDB</li> <li>go 使用私有服务器</li> <li>workspace</li></ul></li></ul> <h2 id="go语言的包导入过程">go语言的包导入过程</h2> <ul><li>go编译快的原因</li> <li>go程序的构建过程</li></ul> <p>go 程序编译快的原因。1是因为go要求每一个包都必须显式的标记处引入的包。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> hi

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;fmt&quot;</span>
  <span class="token string">&quot;io&quot;</span>

  <span class="token string">&quot;github.com/shgopher/hui&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>所以编译器无需去查找这个文件中具体引入了哪些包就可以在头部检索出全部的导包名单，2是因为go语言不允许循环引用，比如说a引用了b，b又引入了a，所以每一个包都是独立的存在，处于“有向无环图“ 这种格式下，进而可以并行去编译不同的包，提高编译效率。3包编译的结果里（<code>xx.o</code>,<code>xx.a</code>）中不仅存储了此包的导出信息，还存储了它引入的包的导出信息，这样编译器只需要读取一个目标文件就可以获取全部的包信息，不需要读取全部的文件。比如p包要引入q包，那么q包的.a文件已经包括了它引入的全部包的导出信息，这样编译器可以快速统计某一个包被引用的情况，比如包引用了a b ，a b 分别引用了c 但是版本不同，那么这种情况下因为主包已经了解了他们的情况，所以就可以用最小版本原则去选择一个版本的包进行编译即可。有点类似分封制，我帝王p包，我的直接负责人是诸侯q，q掌握了它下级s的所有数据，假设s还有下级，s掌握了w的所有数据，然后层层回报，当帝王p最终编译的时候，它已经完全拥有了所有的数据，可以精准调控。再结合每一个包都可以独立的并行编译，所以这一整套下来go的编译速度就会很快。并且在go.mod文件中也会详细记录使用过的包及其版本，那么并行下载，快速编译就不是梦了。</p> <p>go程序的构建过程。go程序的建立是由编译和链接两个阶段组成的，举个例子
有一个项目拥有一个main包，一个lib包，lib包会被引入到main包中，那么编译的过程是这样的，首先创建一个临时工作区域，编译lib包为lib.a,编译main包为main.a,链接器将lib.a和main.a链接成name.out ，然后改名为name（unix-like），<strong>使用第三方包的意思就是链接了该包的源代码编译的最新的.a文件而已</strong>，并且<strong>每次编译</strong>都会重新编译最新的.a文件（所以只保留.a文件，删除源码是不可行的），但是标准库除外，并不会每次编译都会重新编译标准库，所以说如果你修改了源码一定得把标准库.a文件删除，并且build的时候使用 <code>build -a</code> 的方式才可以使用自己更新的标准库。</p> <p>一个小tip：go导包的时候引入的是路径名称，路径名称<strong>通常</strong>最后一位路径名称跟包名保持一致，当然也可以不一致。例如<code>github.com/shgopher/go-hui</code> 但是实际上包名称是这个<code>package hui</code>，所以导入的时候按照<code>github.com/shgopher/go-hui</code>,使用的时候用<code>hui.xxx()</code>。</p> <p>因为包的名称很容易发生冲突，所以go接受包名称的重命名</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>

  app  <span class="token string">&quot;github.com/shgopher/app&quot;</span>
  app1  <span class="token string">&quot;github.com/googege/app&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>除此之外还有 <code>_</code> 方式，它会<strong>计算包级变量的初始化表达式</strong>和<strong>执行导入包的init初始化函数</strong>，意思就是跟init函数有关的内容都会被计算，并且导入进去。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;image&quot;</span>
	<span class="token string">&quot;image/jpeg&quot;</span>
	<span class="token boolean">_</span> <span class="token string">&quot;image/png&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">toJPEG</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">,</span> os<span class="token punctuation">.</span>Stdout<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;jpeg: %v\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">toJPEG</span><span class="token punctuation">(</span>in io<span class="token punctuation">.</span>Reader<span class="token punctuation">,</span> out io<span class="token punctuation">.</span>Writer<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	img<span class="token punctuation">,</span> kind<span class="token punctuation">,</span> err <span class="token operator">:=</span> image<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Fprintln</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;Input format =&quot;</span><span class="token punctuation">,</span> kind<span class="token punctuation">)</span>
	<span class="token keyword">return</span> jpeg<span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> img<span class="token punctuation">,</span> <span class="token operator">&amp;</span>jpeg<span class="token punctuation">.</span>Options<span class="token punctuation">{</span>Quality<span class="token punctuation">:</span> <span class="token number">95</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>比如这个例子，image.Decode会查询注册表，看看注册表里都有谁，这个时候我们引入的_ iumage/png 的init函数就是将png中实现了接口的具体数据导入到了注册表中，所以说这里只需要导入这个init函数即可。</p> <p>这种用法还是比较重要的，我们来自己编写一段代码，来看看实现这种注册器的基本原理：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 这里是实现这个注册器</span>
<span class="token keyword">package</span> go2
<span class="token comment">// 在某个包实现go2的时候，这里是go3，这个drivers就被初始化了。</span>
<span class="token keyword">var</span> drivers <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>Driver<span class="token punctuation">)</span>

<span class="token keyword">type</span> Driver <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Register</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> driver Driver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	drivers<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> driver
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">DDD</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> d Driver
	<span class="token keyword">if</span> d1<span class="token punctuation">,</span> ok <span class="token operator">:=</span> drivers<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;no real driver registered&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		d <span class="token operator">=</span> d1
	<span class="token punctuation">}</span>
	d<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 这里是实际的实现我们注册器那个包实现的抽象方法</span>
<span class="token keyword">package</span> go3

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;shgopher.com/go2&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> ddd <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>ddd<span class="token punctuation">)</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;this is go3&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	go2<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span><span class="token string">&quot;go3&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ddd<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code>
<span class="token comment">// 最后我们来使用一下：</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;shgopher.com/go2&quot;</span>
	<span class="token boolean">_</span> <span class="token string">&quot;shgopher.com/go3&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	go2<span class="token punctuation">.</span><span class="token function">DDD</span><span class="token punctuation">(</span><span class="token string">&quot;go3&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>另外还有一种导入包的奇妙用法，就是</p> <div class="language-go extra-class"><pre class="language-go"><code>	<span class="token punctuation">.</span> <span class="token string">&quot;fmt&quot;</span>

	<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>它的意思是省略包名，no！，请不要这么用。</p> <h2 id="导包的顺序">导包的顺序</h2> <h2 id="go-module-构建工具">go module 构建工具</h2> <ul><li>go111MODULE</li> <li>GOPROXY</li> <li>GOSUMDB</li> <li>module版本的升级</li> <li>workspace</li></ul> <p>go自带包管理工具 go module ,本文章写作时go的版本是 1.19 ，所以过去的go path，go vendor，go dep 均不再提及，读者也不用去care，鉴于干谈 go module 非常的枯燥，我设立一个例子来讲述go module。</p> <p>在桌面，我们使用 go module的创建命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/Desktop

<span class="token function">mkdir</span> hello

go mod init github.com/shgopher/hello 

</code></pre></div><p>创立了一个以 hello 作为包名称的包。这里我们使用<code>github.com/shgopher/hello</code> 是证明这个包使用GitHub进行存储，因为go使用git来管理版本，在项目内部，这个项目的包名称就是最后一个名称，hello才是这个包的正式名称，此处是惯用，实际上真实管理包正式名称的是每一个文件上的package xx 管理的，整个就是路径而已，不过习惯于最后一个路径名称为包的名称，即：最后一个名称 == package 后面的 xxx 。</p> <p>然后我们在这个项目的root路径下会发现go帮我们创建了一个go.mod 的文件，它就是go module的版本文件，我们拿一个go.mod 来作为举例</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 一个 go.mod 目录：</span>

module github<span class="token punctuation">.</span>com<span class="token operator">/</span>shgopher<span class="token operator">/</span>hello

<span class="token keyword">go</span> <span class="token number">1.19</span>


require <span class="token punctuation">(</span>
  github<span class="token punctuation">.</span>com<span class="token operator">/</span>apache<span class="token operator">/</span>thrift v0<span class="token punctuation">.</span><span class="token number">13.0</span>
  github<span class="token punctuation">.</span>com<span class="token operator">/</span>bytedance<span class="token operator">/</span>gopkg v0<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span><span class="token number">20220531084716</span><span class="token operator">-</span>665b4f21126f
  github<span class="token punctuation">.</span>com<span class="token operator">/</span>appleboy<span class="token operator">/</span>gin<span class="token operator">-</span>jwt<span class="token operator">/</span>v2 v2<span class="token punctuation">.</span><span class="token number">6.4</span>
  gopkg<span class="token punctuation">.</span>in<span class="token operator">/</span>yaml<span class="token punctuation">.</span>v3 v3<span class="token punctuation">.</span><span class="token number">0.1</span>
<span class="token punctuation">)</span>

require <span class="token punctuation">(</span>

	github<span class="token punctuation">.</span>com<span class="token operator">/</span>beorn7<span class="token operator">/</span>perks v1<span class="token punctuation">.</span><span class="token number">0.1</span> <span class="token comment">// indirect</span>
<span class="token punctuation">)</span>

replace <span class="token punctuation">(</span>
	<span class="token comment">// 后面指向的要么是相对路径例如 ../shgopher/.com/net</span>
	<span class="token comment">// 要么一定要在后面加上版本，并且是可以获取到的包</span>
	golang<span class="token punctuation">.</span>org<span class="token operator">/</span>x<span class="token operator">/</span>net v1<span class="token punctuation">.</span><span class="token number">1.2</span> <span class="token operator">=</span><span class="token operator">&gt;</span> shgopher<span class="token punctuation">.</span>com<span class="token operator">/</span>net v1<span class="token punctuation">.</span><span class="token number">4.5</span>
<span class="token punctuation">)</span>

</code></pre></div><p>我们一个一个解释，首先 最开头的是 这个包的路径名称，实际上go会使用 <code>git clone https://github.com/shgopher/hello.git</code> 的方式下载包，当然，假设你不使用GitHub的git作为项目的存储位置，使用自建的也是OK的，比如 <code>module shgopher.com/hello</code> 只要同样配置了git服务器都可以，因为底层都是使用的 <code>git clone https://xxx.com/xx.git</code> 模式。</p> <p>接下来的 <code>go 1.19</code> 是这个项目使用的go的大版本，比如你使用的是 <code>1.19.1</code> ， <code>1.19.2</code> ， 上面写的都是<code>go 1.19</code>，比如你使用 <code>go mod edit -go=1.19</code>来更新此项目使用的go版本的时候，只能写到minor，而不能加上patch（minor和patch下文有说）。</p> <p>接下里有两个require，其中 第一个require指的是直接引入的包，后面的require是间接引用的包。意思就是你引用的包，它引入的包。</p> <p>第一个require中，我给出了四种常见的版本用法</p> <ol><li>使用 git version 命名的版本 <code>v0.13.0</code></li> <li>项目没有使用 version 命名，go官方使用最新的文件，并且给予了它一个临时的版本号 <code>v0.0.0-20220531084716-665b4f21126f</code></li> <li>当项目的版本超过1.x的时候，go推荐使用再加上一个/v2 的方式进行命名，但是实际上它的包名称仍然是gin-jwt，并且1.x和2.x的包可以同时引入项目中，因为他们算两个包，只需要重命名即可。版本2和版本1的module后面写的也不一样，比如一个是<code>module github.com/shgopher/collie</code>版本2就是 <code>module github.com/shgopher/collie/v2</code> 不过虽然最后结尾的是v2 但是package 后面写的仍然是collie</li> <li>也可以使用yaml.v3 的方式进行命名，因为路径名称并不是包的名称，所以这种方式也有不少项目使用</li></ol> <p>第二个require，全部都是间接引用的包名称，go也会一并下载到本地缓存，go会使用 <code>～/go/pkg/mod/包名称@版本号</code> 的地方去保存下载下来的包。</p> <p>使用 <code>go list -m -json all</code> 命令可以查看当前项目的所有依赖的包名称，例如</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;Path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;github.com/marmotedu/iam&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Main&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Dir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/shgopher/Desktop/github-projects/iam&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;GoMod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/shgopher/Desktop/github-projects/iam/go.mod&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;GoVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.18&quot;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
	<span class="token property">&quot;Path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cloud.google.com/go&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v0.93.3&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-08-17T22:38:11Z&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Indirect&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token property">&quot;GoMod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/shgopher/go/pkg/mod/cache/download/cloud.google.com/go/@v/v0.93.3.mod&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;GoVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.11&quot;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
	<span class="token property">&quot;Path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;github.com/marmotedu/component-base&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v1.6.2&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;Time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-12-21T06:47:41Z&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;GoMod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/shgopher/go/pkg/mod/cache/download/github.com/marmotedu/component-base/@v/v1.6.2.mod&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;GoVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.17&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们重点关注几个字段，首先第一个对象中，<code>&quot;Main&quot;:true</code>，表示这个对象描述的包属于主包，即，这个项目的root路径下的<code>go.mod</code>；第二个对象中，我们看到 <code>&quot;Indirect&quot;: true,</code> 意思就是指这个包是间接引入的包，第三个对象里，并没有出现indirect的字段，就证明这个包是直接引入的。因为这个列举的主要是go.mod 的目录，又因为拥有一个go.mod的包拥有同样的版本号，所以包和包的子包是公用一个go.mod的，只会出现一次。</p> <p>接下来谈一谈如何控制go引入的包的版本号。</p> <p>当我们更新一个旧的项目中的依赖时，我们可以使用<code>go clean -modcache</code> 的命令去删除go缓存的go包。然后显式的为包设置版本，第一种方法是直接在go.mod 写入要引入的包的版本，第二种方法是使用<code>go mod -require=github.com/shgopher/hello@v0.1.1</code> 的方式写入你想要的包的版本，除了第二种这种比较精确的方式，go mod 还支持query的方式去指定范围，例如说<code>go mod -require=github.com/shgopher/hello@&gt;=v0.1.1</code> 。</p> <p>go包采用“最小版本”选择的理念。举个例子，我的项目hello，直接引入了c包和d包，然后c和d又分别引入了e包，那么最后本项目使用的 c,d,e 包采用的是哪个版本呢？</p> <p>我们详细说明一下，假设我们使用的cde都是@latest，那么每次build的时候，都会去下载最新的包；如果我们使用了具体的版本，假设我们在go.mod 中给定的c d 分别是 v0.1.0 v1.0.1 但是呢，c存在多个版本，比如现在有 v0.1.1 v0.2.1 那么根据最小版本的选择问题，go会选择一个符合v0.1.0 的最小版本，即：&gt;=v0.1.0 ,所以此处会选用v0.1.1 ,也就是说go的版本的隐藏含义是大于等于选最小，很多别的语言都是大于等于选最大，例如rust，但是强调一下，<strong>这个大于等于选最大或者最小说的是一个版本的情况下，超过版本号的时候，算俩包（例如v1.1.0 和 v2.1.0 就算俩大版本了，所以说他们是俩包都不为过）</strong>，而且我们在改变版本的时候应该先把缓存给清除了<code>go clean -modcache</code>，接下来我们的cd包分别引入了e包，假如e存在 v1.1.0 v1.2.0 v1.3.0 v1.4.0 ,c d 分别引入的是 v1.1.0 v1.3.0 那么go会<strong>合并需求（只引入包众多版本的一个版本）</strong>，并且依然采用最小版本的方式即：最终只选用e包的v1.3.0 这一个版本的包引入，总结一下：单个包，使用 &gt;= 的最小值引入，多个包引入同一个包的情况，使用满足他们共同条件下的最小值。</p> <p>使用go mod tidy 可以对这个项目的包进行梳理，比如使用latest的包会重新比对，然后下载最新版本的包，比如在require中明确引入的包，但是在实际上线前发现没有继续使用这个包了，那么使用go mod tidy 也可以删除这个包，这个命令类似于 “刷新” 这个概念。</p> <p>如何优雅的升级和降级引入的包版本？</p> <p>我们会用到 下面两个命令</p> <ul><li>go list</li> <li>go get</li></ul> <p>首先，我们使用 <code>go list -m -versions github.com/shgopher/hello</code> 的命令查找这个包的众多版本（没有使用git 给定版本的就没办法了，给定@latest，直接用最新的了），例如说会有v1.1.0 v1.2.0 ,假设我们本来用的是v1.1.0 想升级一下，我们使用 <code>go get github.com/shgopher/hello@v1.2.0</code> 即可优雅的升级这个包的版本，当然降级也是一样的，反正指定一个包即可，要注意的是，go在升级或者降级的时候，会自动将间接使用的包也做出相应的版本调整。假如我们现在想把所有的依赖包升级为这个版本下的最新包，使用<code>go get -u</code> 就可以更新所有的直接依赖和间接依赖的包为最新包。如果只想升级patch而不是minor（v1.2.0 ；1 是version ，2是minor，3是patch）使用 <code>go get -u=patch</code>，如果只想升级某一个包（及其依赖包）到最新版本，在后面指出来具体的包名称即可,<code>go get -u github.com/shgopher/hello</code>。</p> <p>go install 和go get 是两个比较像的命令，其中 go get 仅仅用在go module 中调整版本的时候，比如升级，降级，go install 用于下载包，两者都是一样的，如果包的后面带上版本那么就是指定版本，如果不带就是最新版本。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> install github<span class="token punctuation">.</span>com<span class="token operator">/</span>shgopher<span class="token operator">/</span>hello 

<span class="token keyword">go</span> install github<span class="token punctuation">.</span>com<span class="token operator">/</span>shgopher<span class="token operator">/</span>hello@v1<span class="token punctuation">.</span><span class="token number">1.2</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> get <span class="token operator">-</span>u github<span class="token punctuation">.</span>com<span class="token operator">/</span>shgopher<span class="token operator">/</span>hello
<span class="token keyword">go</span> get github<span class="token punctuation">.</span>com<span class="token operator">/</span>shgopher<span class="token operator">/</span>hello@v1<span class="token punctuation">.</span><span class="token number">3.4</span>
</code></pre></div><p>在使用 go install的时候其实是忽略 go.mod 的，所以go install 跟go.mod 没有任何关系，也不会记录go.mod中，它的作用就是下载包，go get 跟go.mod 紧密相关，它需要go.mod ，并且每次更改都会记录在go.mod中，当你在一个没有go.mod的路径下（指的是此路径，此路径的父路径也没有）使用go get 会提示如下错误</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span><span class="token punctuation">:</span> <span class="token keyword">go</span><span class="token punctuation">.</span>mod file not found in current directory or any parent directory<span class="token punctuation">.</span>
	<span class="token char">'go get'</span> is no longer supported outside a module<span class="token punctuation">.</span>
	To build and install a command<span class="token punctuation">,</span> use <span class="token char">'go install'</span> with a version<span class="token punctuation">,</span>
	like '<span class="token keyword">go</span> install example<span class="token punctuation">.</span>com<span class="token operator">/</span>cmd@latest'
	For more information<span class="token punctuation">,</span> see https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>golang<span class="token punctuation">.</span>org<span class="token operator">/</span>doc<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>get<span class="token operator">-</span>install<span class="token operator">-</span>deprecation
	or run '<span class="token keyword">go</span> help get<span class="token char">' or '</span><span class="token keyword">go</span> help install'<span class="token punctuation">.</span>
</code></pre></div><p>所以这个时候应该使用的是 go install 。</p> <p>GOPROXY 是go的代理服务器。go之前使用GitHub，gitlab等托管平台，goproxy命令可以设置一个集中式的代理服务，比如</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> GOPROXY <span class="token operator">=</span> https://goproxy.cn,direct 

<span class="token builtin class-name">export</span> GOPROXY <span class="token operator">=</span> https://proxy.golang.org,direct

</code></pre></div><p>其中前者是国内常用的代理服务器，后者是 go 官方的代理服务器；<code>direct</code> 的意思是，<strong>直接</strong>使用代理服务器的内容，<code>,</code> 的意思是前面的服务器<strong>只有</strong>出现404和410错误的时候才会去选择逗号后面的服务，如果想设置只要发生错误就使用后者的命令，那么可以使用<code>|</code>, 例如使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go <span class="token function">env</span> -w <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://proxy.golang.org<span class="token operator">|</span>https://goproxy.cn<span class="token operator">|</span>direct`
</code></pre></div><p>这里有个小知识，因为<code>｜</code> 在unix-like 操作系统中通常还表示通道的含义，就是前面的输出等于后面的输入，所以我们需要将这个符号进行转义才能正常使用：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go <span class="token function">env</span> -w <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://proxy.golang.org<span class="token punctuation">\</span><span class="token operator">|</span>https://goproxy.cn<span class="token punctuation">\</span><span class="token operator">|</span>direct

</code></pre></div><p>go module 还有 go.sum 这个文件，它存储的是包的一些基础信息，最重要的是对于一个包求hash值，记录这个hash，在每次build的时候对于缓存的包和go.sum中的hash值做对比，来规避恶意更改，go.sum 会在项目的更新换代过程中保存多个版本的包信息。</p> <p>GOSUMDB命令指向的服务就是保存公有包的校验和的数据库。一个新的包，在一切运行正确的情况下，go会通过GOSUMDB配置的数据库去查询这个包的校验和，查询出结果后和下载的包进行比对，正确的情况下存入go.sum；如果一个已经缓存的包，每次run build的时候都会将缓存的包文件校验跟go.sum进行比对来保证正确性。</p> <p>当然，如果你不想使用GOSUMDB，使用<code>go env -w GOSUMDB=off</code> 即可。这样就无法对比包和数据库中的校验和，只能做本地校验了。</p> <p>我们讲解了如果配置公有的代理服务器 GOPROXY，文件校验和数据库GOSUMDB，接下来我们谈一下如果我们想使用一个私有的包，比如一个GitHub上的私有包，一个本地git服务器上的包，我们使用GOPRIVATE，它的目的就是绕过GOPROXY和GOSUMDB，因为是私有的所以在代理服务器和文件校验和数据库都不会有它的记录，我们可以这么设置</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 意思是这个路径下的所有包都不会经过代理服务器了。</span>
<span class="token comment"># 这个命令支持多个路径使用逗号分隔</span>
<span class="token builtin class-name">export</span> GOPRIVATE <span class="token operator">=</span> shgopher.com,shgopher.io,*.api.shgopher.com
</code></pre></div><p>除了设置这个命令之外，还需要设置一个密钥用来ssh的方式去访问GitHub上的私有仓库，或者是GitHub --- personal access tokens</p> <p>使用ssh，将主机公钥（～/.ssh/id_rsa.pub）添加到github.com的ssh keys中。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>	<span class="token comment">#我们谈一下如果生成公钥：</span>
	<span class="token comment">## 在～/.ssh/ 路径下</span>
	ssh-keygen -t rsa -C <span class="token string">&quot;个人邮箱&quot;</span>
	<span class="token comment">## 将这个id_rsa.pub中的公钥 添加到GitHub中的ssh keys 中</span>
</code></pre></div><p>如果使用ssh的方式获取代码，那么在~/.gitconfig中添加(这一步其实就是一个映射：保持你的日常习惯的情况下，使用了ssh)</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
<span class="token punctuation">[</span>url <span class="token string">&quot;ssh://git@github.com&quot;</span><span class="token punctuation">]</span>
	insteadOf <span class="token operator">=</span> https://github.com
</code></pre></div><p>如果是本地服务器那么就是</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>url <span class="token string">&quot;ssh://git@local.com&quot;</span><span class="token punctuation">]</span>
	insteadOf <span class="token operator">=</span> https://git.local.com
</code></pre></div><p>不过要注意一下，如果使用ssh 那么远程的服务就得变更名称，因为通常我们的GitHub给我们的都是https的方式，使用ssh的话就是：</p> <div class="language-bash extra-class"><pre class="language-bash"><code> <span class="token function">git</span> remote set-url origin git@github.com:USERNAME/REPOSITORY.git
</code></pre></div><p>从ssh更改为https就是</p> <div class="language-go extra-class"><pre class="language-go"><code>git remote set<span class="token operator">-</span>url origin https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>USERNAME<span class="token operator">/</span>REPOSITORY<span class="token punctuation">.</span>git
</code></pre></div><p>使用 GitHub personal access token的方式</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 在GitHub personal access tokens中申请即可，然后配置在～/.netrc</span>

machine github.com login shgopher password 你的 personal access tokens
</code></pre></div><p>在Linux中要配置~/.netrc ，但在macOS中，git输入的username和令牌会自动的缓存，不用设置这个配置文件。</p> <p>更多关于GitHub访问的信息可以访问<a href="https://docs.github.com/en/get-started/getting-started-with-git/managing-remote-repositories#switching-remote-urls-from-ssh-to-https" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>我个人建议直接使用 GitHub的 personal access	tokens（仅支持https） 这种令牌的方式代替密码，并且使用https即可，简单，安全，好用，
另外如果你的令牌更新了，假设是Macos的情况下，可以去钥匙串访问的互联网密码种类中去更新令牌</p> <p>如果我们引入的包是不支持https协议的，那么我们可以设置 <code>GOINSECURE = private.res.com</code> 来使用这种私有库。</p> <p>go仅仅支持https和http标准端口的带有域名的包，比如我们使用ip，或者端口不是80和443，那么设置GOPROXY和GOPRIVATE GOINSECURE 都没用了。</p> <p>比如类似这种:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 这种无法使用</span>
<span class="token keyword">import</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">9090</span><span class="token operator">/</span>test<span class="token operator">/</span>t
</code></pre></div><p>这种直接使用ip的方式不能写到go的代码中，所以我们可以使用git的insteadof功能来改变一下，使用一个正常的url去改变掉这个ip</p> <div class="language-go extra-class"><pre class="language-go"><code># ~<span class="token operator">/</span><span class="token punctuation">.</span>gitconfig
<span class="token punctuation">[</span>url <span class="token string">&quot;132.148.1.1:9090/test/t&quot;</span><span class="token punctuation">]</span>
	insteadof<span class="token operator">=</span><span class="token string">&quot;shgopher.com/test/t&quot;</span>
</code></pre></div><p>这个时候你引入的时候写 shgopher.com/test/t 就可以了，它会自己找192.168.1.1:9090/test/t 真实值去代理，并且shgopher.com/test/t也要加入到GOPRIVATE中才可以。</p> <p>这个时候有个问题，就是如果shgopher.com 没有配置版本管理软件，例如git这种，go是无法获取数据的，go一般会存储一些网站，例如GitHub，gitlab，所以它看到类似github.com/xxx/的地址就去找使用git，或者你手动写上git，比如shgopher/d/x.git go也会明白你使用的git，go还能发送请求的方式去获取你使用的版本软件，比如 golang.org/x/net go就会请求 https://golang.org/x/net?go-get=1 这个服务提供了一个html：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go-import<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>golang/x/net git https://go.googlesource.com/net<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>go-source<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>golang.org/x/net https://github.com/golang/net<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这表示这个golang.org/x/net 的包实际是通过git的方式从https://go.googlesource.com/net获取的。</p> <p>我们可以让 <code>GET shgopher.com?go-get=1</code>返回一个html，在里面设置为 content=&quot;shgopher.com/test/t git 132.148.1.1:9090/test/t&quot;。</p> <p>其实，老老实实的使用go推荐的导包方式挺好的，即便是私有包也好好的安排一个git版本服务器，仅限内部使用的话，配置好GOPRIVATE并且使用ssh公钥和私钥或者GPG的方式加密获取包，这种才是王道。</p> <p>配置私有的GOPROXY，你不能总想着靠别人，如果想搭建一个属于自己的goproxy服务器，那么可以使用 https://github.com/goproxy/goproxy 这个项目</p> <p>go推出了仅用于本地开发的workspace，我们来介绍一下这个功能，比如说我们要在一个项目中你引入一个还未公开到公共仓库的包github.com/shgopher/hui，那么在这个时候就需要workspace了。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">&quot;github.com/shgopher/hui&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>很显然这个包还未发布，所以不可能引入，在之前通常使用replace的方式，但是有了 workspace 以后，不到特定的场景就不需要使用replace，比如尚未发布的包这种场景用workspace最好用（包的子包不需要任何设置，就可以主包直接引入这个子包了，这一点要搞清楚）。</p> <p>使用go work init 来创建一个工作区，go.work 形如：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">//go.work</span>
go1<span class="token punctuation">.</span><span class="token number">19</span>

<span class="token function">use</span><span class="token punctuation">(</span>
	<span class="token punctuation">.</span> <span class="token comment">//go.work当前路径是可以省略的</span>
	<span class="token operator">/</span>Users<span class="token operator">/</span>ddd<span class="token operator">/</span>src<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">/</span>hui
<span class="token punctuation">)</span>

</code></pre></div><p>go.work 可以设置在需要工作区的路径的父路径 (如果父路径没有就会一直忘外寻找直到 根路径 ) ，工作区中的命令会向外部去寻找go.work，所以我们通常可以在需要workspace的地方的父路行下设置go.work，并且设置为绝对路径这样简单高效,记住，路径是不包含子路径的，比如本来是/workspace/go1 但是你设置的是/workspace 那么就是错的，它会寻找/workspace中有没有go.mod 它以go.mod 作为寻找对象。当然了一个包的子包（例如/workspace/go1/a）无需再写进去go.work中，它跟外部的包是一个包。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">use</span><span class="token punctuation">(</span>
	<span class="token operator">/</span>workspace<span class="token operator">/</span>a
	<span class="token operator">/</span>workspace<span class="token operator">/</span>b
	<span class="token operator">/</span>workspace<span class="token operator">/</span>c
<span class="token punctuation">)</span>
</code></pre></div><p>在工作区同样可以设置replace，但是级别没有go.mod中的高，会被go.mod 覆盖。</p> <p>go的包和包的管理工具go module 基本上已经讲解完毕了，以后有了新的见解再更新这篇文章。</p> <h2 id="参考资料">参考资料</h2> <ul><li>https://go.dev/blog/get-familiar-with-workspaces</li> <li>https://book.douban.com/subject/35720728/  图书下册 321页 - 349页；图书上册 120页 - 131页</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shgopher/GOFamily/edit/release/工程/包及其构建工具/README.md" target="_blank" rel="noopener noreferrer">在GitHub中编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">11/30/2022, 9:02:10 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div></div><!----></div></div>
    <script src="/GOFamily/assets/js/app.a103b542.js" defer></script><script src="/GOFamily/assets/js/2.ed67c6f0.js" defer></script><script src="/GOFamily/assets/js/53.8221a3a8.js" defer></script>
  </body>
</html>
